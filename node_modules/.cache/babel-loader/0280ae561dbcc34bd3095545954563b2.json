{"ast":null,"code":"var _jsxFileName = \"/home/danielwei/Development/GitProjects/modulus/src/components/Home/index.js\";\nimport React from 'react';\nimport logo from './moduluslogo.png';\nimport './App.css';\nimport { withAuthorization } from '../Session';\nimport { Modal, ModalManager, Effect } from 'react-dynamic-modal';\nimport { PieChart } from 'react-minimal-pie-chart';\nimport * as firebase from 'firebase';\nimport backarrow from './backarrow.png';\n\nrequire('@firebase/database');\n\nfunction Logo() {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"logo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 14,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 15,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"img\", {\n    width: \"100%\",\n    src: logo,\n    alt: \"Modulus Logo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 16,\n      columnNumber: 13\n    }\n  }));\n}\n\nfunction CourseListItem(props) {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 23,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"courselistitem\",\n    onClick: () => {\n      props.changeActiveCourse(props.name);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 24,\n      columnNumber: 13\n    }\n  }, props.name), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      fontSize: \"5px\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 17\n    }\n  })));\n}\n\nfunction AddCourseItem(props) {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"addcourseitem\",\n    onClick: props.addCourseMode,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 9\n    }\n  }, \"+\");\n}\n\nclass Sidebar extends React.Component {\n  //the entire left sidebar\n  constructor(props) {\n    super(props);\n\n    this.changeActiveCourse = name => {\n      this.props.changeActiveCourse(name);\n    };\n\n    this.addCourseMode = () => {\n      this.props.addCourseMode();\n    };\n\n    this.state = {\n      username: props.username,\n      activeCourse: props.activeCourse,\n      arrCourses: props.arrCourses\n    };\n  } //utility functions to pass info up to container\n\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"sidebar\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Logo, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"courselist\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 17\n      }\n    }, this.props.arrCourses.length <= 1 ? /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 55\n      }\n    }) : this.props.arrCourses.map(course => course === \"Welcome\" ? /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 127\n      }\n    }) : /*#__PURE__*/React.createElement(CourseListItem, {\n      name: course,\n      active: this.props.activeCourse === course ? \"active\" : \"\",\n      changeActiveCourse: this.changeActiveCourse,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 139\n      }\n    })), /*#__PURE__*/React.createElement(AddCourseItem, {\n      addCourseMode: this.addCourseMode,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 20\n      }\n    }))));\n  }\n\n}\n\nclass MyModal extends React.Component {\n  render() {\n    const {\n      text,\n      onRequestClose\n    } = this.props;\n    var internalDisplay = \"\"; //set this to the appropriate stuff based on this.props.internal and vark\n\n    var link = this.props.internal;\n\n    if (link.includes(\"/edit?usp=sharing\")) {\n      //standardize on \"view\" as the thing to replace, since GDrive is gaey and some view-only links still have edit in the link\n      link = link.substring(0, link.indexOf(\"/edit?usp=sharing\")) + \"/view?usp=sharing\";\n    }\n\n    if (link.includes(\"/view?usp=sharing\")) {\n      //if its a google drive shared file\n      link = link.substring(0, link.indexOf(\"/view?usp=sharing\")) + \"/preview\"; //make it an embeddable preview\n      //embed it\n\n      var beforeCode = \"<iframe src=\\\"\";\n      var afterCode = \"\\\" width=\\\"100%\\\" height=\\\"750\\\" />\";\n      var code = beforeCode + link + afterCode;\n      internalDisplay = /*#__PURE__*/React.createElement(\"div\", {\n        dangerouslySetInnerHTML: {\n          __html: code\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 36\n        }\n      });\n      return (\n        /*#__PURE__*/\n        //big modal\n        React.createElement(Modal, {\n          style: {\n            overlay: {\n              position: 'fixed',\n              top: -125,\n              left: 0,\n              right: 0,\n              bottom: 0,\n              zIndex: 99999999,\n              overflow: 'hidden',\n              perspective: 1300,\n              backgroundColor: 'rgba(0, 0, 0, 0.3)'\n            },\n            content: {\n              position: 'relative',\n              margin: '15% auto',\n              width: '90%',\n              height: '770px',\n              border: '1px solid rgba(0, 0, 0, .2)',\n              background: '#fff',\n              overflow: 'auto',\n              borderRadius: '4px',\n              outline: 'none',\n              boxShadow: '0 5px 10px rgba(0, 0, 0, .3)',\n              textAlign: 'center',\n              overflow: 'hidden'\n            }\n          },\n          onRequestClose: onRequestClose,\n          effect: Effect.ScaleUp,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 21\n          }\n        }, internalDisplay)\n      );\n    } else {\n      //just create a button and insert the link as the button's destination\n      var beforeCode = \"<a class=\\\"linkbutton\\\" target=\\\"_blank\\\" href=\\\"\";\n      var afterCode = \"\\\">Click here to open content in new tab</a>\";\n      var code = beforeCode + link + afterCode;\n      internalDisplay = /*#__PURE__*/React.createElement(\"div\", {\n        dangerouslySetInnerHTML: {\n          __html: code\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 32\n        }\n      });\n      return (\n        /*#__PURE__*/\n        //small modal\n        React.createElement(Modal, {\n          className: \"modaldialog\",\n          onRequestClose: onRequestClose,\n          effect: Effect.ScaleUp,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 17\n          }\n        }, /*#__PURE__*/React.createElement(\"h1\", {\n          className: \"modaldialog\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 20\n          }\n        }, /*#__PURE__*/React.createElement(\"table\", {\n          style: {\n            maxHeight: \"50px\"\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 24\n          }\n        }, /*#__PURE__*/React.createElement(\"tr\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 28\n          }\n        }, /*#__PURE__*/React.createElement(\"td\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 32\n          }\n        }, /*#__PURE__*/React.createElement(\"button\", {\n          id: \"backbutton\",\n          onClick: ModalManager.close,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 35\n          }\n        }, /*#__PURE__*/React.createElement(\"img\", {\n          src: backarrow,\n          alt: \"Return\",\n          height: \"15px\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 88\n          }\n        }))), /*#__PURE__*/React.createElement(\"td\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 32\n          }\n        }, internalDisplay)))))\n      );\n    }\n  }\n\n}\n\nclass ModuleContentItem extends React.Component {\n  constructor(props) {\n    super(props);\n    this.openModal = this.openModal.bind(this);\n  }\n\n  openModal() {\n    //this registers the click\n    this.props.addVarkClicks(this.props.vark);\n    const header = this.props.name;\n    ModalManager.open( /*#__PURE__*/React.createElement(MyModal, {\n      text: header,\n      internal: this.props.internal,\n      vark: this.props.vark,\n      onRequestClose: () => true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 27\n      }\n    }));\n  } // const [openedStatus, open] = React.useState(\"\");\n  // React.useEffect(() => { \n  //    //open item view\n  // });\n  // let precede;\n  // if (openedStatus===\"active\") {\n  //     precede = openedStatus;\n  // } else {\n  //     precede = props.vark;\n  // }\n  //var attribute = precede+\"modulecontentitem\"\n\n\n  render() {\n    let precede = this.props.vark;\n    var attribute = precede + \"modulecontentitem\";\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: attribute,\n      onClick: () => this.openModal(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 13\n      }\n    }, this.props.name);\n  }\n\n}\n\nfunction ModuleItem(props) {\n  const [active, setActive] = React.useState(props.active);\n  var attribute = active + \"moduleitem\";\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: attribute,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    class: \"moduletitle\",\n    onClick: () => setActive(active === \"active\" ? \"\" : \"active\"),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 13\n    }\n  }, props.name), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"modulecontents\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 13\n    }\n  }, props.contents.map(contentitem => props.varkMode === \"All\" || props.varkMode === props.vark[props.contents.indexOf(contentitem)] ? /*#__PURE__*/React.createElement(ModuleContentItem, {\n    name: contentitem,\n    vark: props.vark[props.contents.indexOf(contentitem)],\n    internal: props.internals[props.contents.indexOf(contentitem)],\n    addVarkClicks: props.addVarkClicks,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 22\n    }\n  }) : /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 22\n    }\n  }))));\n}\n\nfunction VarkProfile(props) {\n  const lineWidth = 60;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"varkprofile\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"table\", {\n    width: \"100%\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(PieChart, {\n    style: {\n      fontFamily: '\"Nunito Sans\", -apple-system, Helvetica, Arial, sans-serif',\n      fontSize: '8px',\n      height: \"150px\"\n    },\n    data: [{\n      color: 'red',\n      title: 'V',\n      value: props.Vcnt\n    }, {\n      color: 'blue',\n      title: 'A',\n      value: props.Acnt\n    }, {\n      color: 'green',\n      title: 'R',\n      value: props.Rcnt\n    }, {\n      color: 'purple',\n      title: 'K',\n      value: props.Kcnt\n    }],\n    radius: PieChart.defaultProps.radius - 6,\n    lineWidth: 60,\n    segmentsStyle: {\n      transition: 'stroke .3s',\n      cursor: 'pointer'\n    },\n    animate: true,\n    label: ({\n      dataEntry\n    }) => Math.round(dataEntry.percentage) + '%',\n    labelPosition: 100 - lineWidth / 2,\n    labelStyle: {\n      fill: '#fff',\n      opacity: 0.75,\n      pointerEvents: 'none'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"varkprofiletext\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 279,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 279,\n      columnNumber: 32\n    }\n  }, \"Course VARK Profile\")), /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      color: \"red\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 280,\n      columnNumber: 29\n    }\n  }, \"Visual\"), /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      color: \"blue\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 29\n    }\n  }, \"Auditory\"), /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      color: \"green\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 282,\n      columnNumber: 29\n    }\n  }, \"Reading/Writing\"), /*#__PURE__*/React.createElement(\"p\", {\n    style: {\n      color: \"purple\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 283,\n      columnNumber: 29\n    }\n  }, \"Kinesthetic\"))))));\n}\n\nclass Select extends React.PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      options: [{\n        name: 'Show all VARK types',\n        value: \"All\"\n      }, {\n        name: 'Visual',\n        value: 'V'\n      }, {\n        name: 'Auditory',\n        value: 'A'\n      }, {\n        name: 'Reading/Writing',\n        value: 'R'\n      }, {\n        name: 'Kinesthetic',\n        value: 'K'\n      }],\n      value: '?'\n    };\n\n    this.handleChange = event => {\n      this.props.passState(event.target.value);\n      this.setState({\n        value: event.target.value\n      });\n    };\n  }\n\n  render() {\n    const {\n      options,\n      value\n    } = this.state;\n    return /*#__PURE__*/React.createElement(React.Fragment, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 332,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"select\", {\n      name: \"search_categories\",\n      id: \"search_categories\",\n      onChange: this.handleChange,\n      value: value,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 333,\n        columnNumber: 13\n      }\n    }, options.map(item => /*#__PURE__*/React.createElement(\"option\", {\n      className: \"option\",\n      key: item.value,\n      value: item.value,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 335,\n        columnNumber: 17\n      }\n    }, \"\\xA0\\xA0\\xA0\", item.name))));\n  }\n\n}\n\nclass MainPanel extends React.Component {\n  //the entire right half of the screen where all the modules are\n  constructor(props) {\n    super(props);\n    this.state = {\n      varkselection: \"All\"\n    };\n    this.handleRemove = this.handleRemove.bind(this);\n    this.handleFilter = this.handleFilter.bind(this);\n    this.filterCallback = this.filterCallback.bind(this);\n  }\n\n  handleRemove(event) {\n    this.props.removeCourse(this.props.activeCourse);\n  }\n\n  handleFilter(theState) {\n    this.setState({\n      varkselection: theState\n    }, () => this.filterCallback());\n  }\n\n  filterCallback() {\n    this.render();\n  }\n\n  getTeacherEmail(nameOfCourse) {\n    const allCourses = JSON.parse(localStorage.getItem('courses'));\n    var teacher;\n\n    for (let i = 0, len = allCourses.length; i < len; ++i) {\n      var course = allCourses[i];\n\n      if (course.CourseName === nameOfCourse) {\n        teacher = course.nteacher;\n      }\n    } // should be returning correct email. If not, try Object.values(course.nteacher) instead\n\n\n    return teacher;\n  }\n\n  render() {\n    //active: \"\" means the module is minimized, \"active\" means its expanded\n    var showModules = true;\n    var showVarkProfile = true;\n    var welcomeMsg;\n    var unenroll;\n    var filter;\n\n    if (this.props.activeCourse === \"none\") {\n      welcomeMsg = \"Select or add a course on the left to get started.\";\n      unenroll = /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 394,\n          columnNumber: 17\n        }\n      });\n      showVarkProfile = false;\n      filter = /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 398,\n          columnNumber: 17\n        }\n      });\n    } else {\n      welcomeMsg = \"Welcome to \" + this.props.activeCourse;\n      unenroll = /*#__PURE__*/React.createElement(\"div\", {\n        className: \"removecoursebutton\",\n        onClick: this.handleRemove,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 404,\n          columnNumber: 17\n        }\n      }, \"Unenroll\");\n      filter = /*#__PURE__*/React.createElement(Select, {\n        passState: this.handleFilter,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 408,\n          columnNumber: 23\n        }\n      });\n\n      if (welcomeMsg === \"Welcome to Welcome\") {\n        welcomeMsg = \"Select or add a course on the left to get started.\";\n        showModules = false;\n        unenroll = /*#__PURE__*/React.createElement(\"div\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 413,\n            columnNumber: 21\n          }\n        });\n        showVarkProfile = false;\n        filter = /*#__PURE__*/React.createElement(\"div\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 417,\n            columnNumber: 21\n          }\n        });\n      }\n    }\n\n    var moduleList = /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 422,\n        columnNumber: 27\n      }\n    });\n\n    if (showModules) {\n      moduleList = /*#__PURE__*/React.createElement(\"div\", {\n        className: \"modulelist\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 425,\n          columnNumber: 17\n        }\n      }, Object.values(this.props.modules).map(module => /*#__PURE__*/React.createElement(ModuleItem, {\n        name: module.title,\n        contents: module.contents,\n        vark: module.vark,\n        internals: module.internals,\n        active: \"\",\n        username: this.props.username,\n        addVarkClicks: this.props.addVarkClicks,\n        varkMode: this.state.varkselection,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 428,\n          columnNumber: 29\n        }\n      })));\n    } //counts the number of each vark item in modules\n\n\n    var Vcnt = 0;\n    var Acnt = 0;\n    var Rcnt = 0;\n    var Kcnt = 0;\n    var module;\n    var varkLetter;\n\n    for (module of this.props.modules) {\n      for (varkLetter of module.vark) {\n        if (varkLetter === \"V\") {\n          Vcnt++;\n        }\n\n        if (varkLetter === \"A\") {\n          Acnt++;\n        }\n\n        if (varkLetter === \"R\") {\n          Rcnt++;\n        }\n\n        if (varkLetter === \"K\") {\n          Kcnt++;\n        }\n      }\n    }\n\n    var varkProfile = /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 468,\n        columnNumber: 28\n      }\n    });\n\n    if (showVarkProfile) {\n      varkProfile = /*#__PURE__*/React.createElement(VarkProfile, {\n        Vcnt: Vcnt,\n        Acnt: Acnt,\n        Rcnt: Rcnt,\n        Kcnt: Kcnt,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 471,\n          columnNumber: 17\n        }\n      });\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"mainpanel\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 481,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"table\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 482,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 483,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 484,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"courseheader\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 485,\n        columnNumber: 29\n      }\n    }, welcomeMsg, /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 487,\n        columnNumber: 33\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 487,\n        columnNumber: 39\n      }\n    }), /*#__PURE__*/React.createElement(\"table\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 488,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 489,\n        columnNumber: 37\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 490,\n        columnNumber: 41\n      }\n    }, unenroll), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 493,\n        columnNumber: 41\n      }\n    }, \"\\xA0\\xA0\\xA0\\xA0\\xA0\"), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 496,\n        columnNumber: 41\n      }\n    }, filter))), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 501,\n        columnNumber: 33\n      }\n    }))), /*#__PURE__*/React.createElement(\"td\", {\n      className: \"rightalignandfloatdown\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 505,\n        columnNumber: 25\n      }\n    }, varkProfile))), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 510,\n        columnNumber: 17\n      }\n    }), moduleList, /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 512,\n        columnNumber: 17\n      }\n    }), \" \", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 512,\n        columnNumber: 24\n      }\n    }), \" \", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 512,\n        columnNumber: 31\n      }\n    }), \" \", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 512,\n        columnNumber: 38\n      }\n    }), \" \", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 512,\n        columnNumber: 45\n      }\n    }), \" \", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 512,\n        columnNumber: 52\n      }\n    }), \" \", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 512,\n        columnNumber: 59\n      }\n    }), \" \", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 512,\n        columnNumber: 66\n      }\n    }), \" \", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 512,\n        columnNumber: 73\n      }\n    }), \" \", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 512,\n        columnNumber: 80\n      }\n    }), \" \", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 512,\n        columnNumber: 87\n      }\n    }), \" \", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 512,\n        columnNumber: 94\n      }\n    }), \" \", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 512,\n        columnNumber: 101\n      }\n    }), \" \", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 512,\n        columnNumber: 108\n      }\n    }), \" \", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 512,\n        columnNumber: 115\n      }\n    }));\n  }\n\n}\n\nclass NameForm extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      value: ''\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleChange(event) {\n    this.setState({\n      value: event.target.value\n    });\n  }\n\n  handleSubmit(event) {\n    //plugs into the backend to add the course, and passes the function on up for the main container to do the re-rendering\n    let shouldAddCourse = false; //check that the course is available on the database. If not, throw an error to the user\n\n    const allCourses = JSON.parse(localStorage.getItem('courses'));\n    var needed;\n\n    for (let i = 0, len = allCourses.length; i < len; ++i) {\n      var course = allCourses[i];\n\n      if (course.nclasscode === this.state.value) {\n        shouldAddCourse = true;\n        needed = course.CourseName;\n      }\n    }\n\n    if (shouldAddCourse) {\n      this.props.addCourse(needed);\n    } else {\n      alert('Sorry, class not found');\n    }\n\n    event.preventDefault();\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 552,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 553,\n        columnNumber: 17\n      }\n    }, \"Enter the course code below\", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 554,\n        columnNumber: 48\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 554,\n        columnNumber: 54\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      value: this.state.value,\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 555,\n        columnNumber: 21\n      }\n    })), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 556,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 556,\n        columnNumber: 23\n      }\n    }), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"submit\",\n      value: \"Submit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 557,\n        columnNumber: 17\n      }\n    }));\n  }\n\n}\n\nfunction AddCoursePanel(props) {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"mainpanel\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 565,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"addcourseview\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 566,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"addcoursetitle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 567,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 568,\n      columnNumber: 21\n    }\n  }, \"Add a course\")), /*#__PURE__*/React.createElement(NameForm, {\n    username: props.username,\n    courses: props.courses,\n    addCourse: props.addCourse,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 570,\n      columnNumber: 17\n    }\n  })));\n}\n\nclass Container extends React.Component {\n  //the main container for everything on the screen, that also stores most global data in its state\n  constructor(props) {\n    super(props); //bind the state setting functions to the current class\n\n    this.addCourse = nameOfCourse => {\n      //actually adds the course\n      var newCourses = this.state.arrCourses.slice();\n      newCourses.push(nameOfCourse);\n      this.setState({\n        arrCourses: newCourses.slice()\n      }, () => {\n        this.changeActiveCourse(nameOfCourse);\n      });\n      const usr = JSON.parse(localStorage.getItem('authUser'));\n      console.log(Object.values(usr).slice()[2]);\n      localStorage.setItem('authUser', JSON.stringify(usr));\n      console.log(Object.values(usr).slice()[2]);\n      this.props.firebase.users().child(Object.values(usr).slice()[0]).update({\n        courses: newCourses.slice()\n      });\n    };\n\n    this.addVarkClicks = varkCharacter => {\n      var newVark = this.state.varkClicks.slice();\n      newVark.push(varkCharacter);\n      this.setState({\n        varkClicks: newVark.slice()\n      });\n      const usr = JSON.parse(localStorage.getItem('authUser'));\n      console.log(Object.values(usr).slice()[6]);\n      localStorage.setItem('authUser', JSON.stringify(usr));\n      console.log(Object.values(usr).slice()[6]);\n      this.props.firebase.users().child(Object.values(usr).slice()[0]).update({\n        wvarkclicks: newVark.slice()\n      });\n    };\n\n    this.removeCourse = nameOfCourse => {\n      var newCourses = this.state.arrCourses.slice();\n      var newnewCourses = [];\n      newCourses.forEach(element => {\n        if (!(element === nameOfCourse)) {\n          newnewCourses.push(element);\n        }\n      });\n      newCourses = newnewCourses.slice();\n      this.setState({\n        arrCourses: newCourses.slice()\n      }, () => {\n        this.changeActiveCourse(this.state.arrCourses.slice()[0]);\n      });\n      const usr = JSON.parse(localStorage.getItem('authUser'));\n      console.log(Object.values(usr).slice()[2]);\n      localStorage.setItem('authUser', JSON.stringify(usr));\n      console.log(Object.values(usr).slice()[2]);\n      this.props.firebase.users().child(Object.values(usr).slice()[0]).update({\n        courses: newCourses.slice()\n      });\n    };\n\n    this.changeActiveCourse = this.changeActiveCourse.bind(this);\n    this.addCourseMode = this.addCourseMode.bind(this);\n    this.state = {\n      arrCourses: props.courses,\n      activeCourse: \"none\",\n      //to be updated with the current open course\n      username: props.name,\n      mainPanelMode: 0,\n      //0 means modules view (default), 1 means add-course view\n      varkClicks: props.varkClicks\n    };\n  }\n\n  changeActiveCourse(nameOfActiveCourse) {\n    this.setState({\n      mainPanelMode: 0,\n      activeCourse: nameOfActiveCourse\n    }, () => {\n      this.render();\n    });\n  }\n\n  addCourseMode() {\n    //switches main panel view to addCourseMode\n    this.setState({\n      mainPanelMode: 1\n    });\n    this.render(); //force React to rerender\n  }\n\n  getModules(name) {\n    const allCourses = JSON.parse(localStorage.getItem('courses')); // here is a parsed json of the course list\n\n    if (name === \"none\") return [];\n\n    for (let i = 0, len = allCourses.length; i < len; ++i) {\n      var course = allCourses[i];\n\n      if (course.CourseName === name) {\n        //now we've retrieved the correct course to display\n        //here we need to return all of the modules in that course in an array\n        var arrayOfModules = Object.values(course.modules);\n\n        for (let j = 0, len2 = arrayOfModules.length; j < len2; ++j) {\n          arrayOfModules[j].contents = Object.values(arrayOfModules[j].contents);\n          arrayOfModules[j].vark = Object.values(arrayOfModules[j].vark);\n          arrayOfModules[j].internals = Object.values(arrayOfModules[j].internals);\n        }\n\n        return arrayOfModules; // we need to convert the objects so that every internal thing is an array, as well as the whole thing, like this [ \n        //     {\n        //         title: course.CourseName,\n        //         contents: [\"Item 1\", \"Item 2\", \"Item 3\"],\n        //         vark: ['V', \"A\", \"R\"],\n        //         internals: [\"https://www.youtube.com/watch?v=2qv_vCHZkcg&t=1689s\", \"oogwayascends.mp3\", \"In the beginning, there was darkness.\"]\n        //     },\n        //     {\n        //         title: course.CourseName,\n        //         contents: [\"Item 1\", \"Item 2\", \"Item 3\"],\n        //         vark: ['V', \"A\", \"R\"],\n        //         internals: [\"https://www.youtube.com/watch?v=2qv_vCHZkcg&t=1689s\", \"oogwayascends.mp3\", \"In the beginning, there was darkness.\"]\n        //     },\n        // ];\n      } else {\n        console.log(\"whoops\");\n      }\n    }\n  }\n\n  render() {\n    var mainpanel;\n\n    if (this.state.mainPanelMode === 0) {\n      mainpanel = /*#__PURE__*/React.createElement(MainPanel, {\n        username: this.state.username,\n        activeCourse: this.state.activeCourse,\n        modules: this.getModules(this.state.activeCourse),\n        removeCourse: this.removeCourse,\n        addVarkClicks: this.addVarkClicks,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 703,\n          columnNumber: 25\n        }\n      });\n    } else if (this.state.mainPanelMode === 1) {\n      mainpanel = /*#__PURE__*/React.createElement(AddCoursePanel, {\n        username: this.state.username,\n        currentCourses: this.state.arrCourses,\n        addCourse: this.addCourse,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 705,\n          columnNumber: 25\n        }\n      });\n    }\n\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"App\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 708,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 709,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"left-element\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 710,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(Sidebar, {\n      username: this.state.username,\n      activeCourse: this.state.activeCourse,\n      arrCourses: this.state.arrCourses,\n      changeActiveCourse: this.changeActiveCourse,\n      addCourseMode: this.addCourseMode,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 711,\n        columnNumber: 25\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"right-element\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 719,\n        columnNumber: 21\n      }\n    }, mainpanel)));\n  }\n\n}\n\nclass Home extends React.Component {\n  constructor(props) {\n    super(props);\n    const usr = JSON.parse(localStorage.getItem('authUser'));\n    this.state = {\n      username: Object.values(usr).slice()[4],\n      email: Object.values(usr).slice()[1],\n      courses: Object.values(usr).slice()[2],\n      varkClicks: Object.values(usr).slice()[6]\n    };\n  }\n\n  componentDidMount() {\n    const usr = JSON.parse(localStorage.getItem('authUser'));\n    this.props.firebase.courses().on('value', snapshot => {\n      const coursesObject = snapshot.val();\n      const coursesList = Object.keys(coursesObject).map(key => ({ ...coursesObject[key],\n        appID: key\n      }));\n      localStorage.setItem('courses', JSON.stringify(coursesList));\n      this.setState({\n        username: Object.values(usr).slice()[4],\n        email: Object.values(usr).slice()[1],\n        courses: Object.values(usr).slice()[2]\n      });\n    });\n  }\n\n  render() {\n    return (\n      /*#__PURE__*/\n      //when login is implemented, it should create an app with the appropriate username passed in\n      React.createElement(Container, {\n        name: this.state.username,\n        courses: this.state.courses,\n        firebase: this.props.firebase,\n        varkClicks: this.state.varkClicks,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 760,\n          columnNumber: 13\n        }\n      })\n    );\n  }\n\n}\n\nconst condition = authUser => !!authUser;\n\nexport default withAuthorization(condition)(Home);","map":{"version":3,"sources":["/home/danielwei/Development/GitProjects/modulus/src/components/Home/index.js"],"names":["React","logo","withAuthorization","Modal","ModalManager","Effect","PieChart","firebase","backarrow","require","Logo","CourseListItem","props","changeActiveCourse","name","fontSize","AddCourseItem","addCourseMode","Sidebar","Component","constructor","state","username","activeCourse","arrCourses","render","length","map","course","MyModal","text","onRequestClose","internalDisplay","link","internal","includes","substring","indexOf","beforeCode","afterCode","code","__html","overlay","position","top","left","right","bottom","zIndex","overflow","perspective","backgroundColor","content","margin","width","height","border","background","borderRadius","outline","boxShadow","textAlign","ScaleUp","maxHeight","close","ModuleContentItem","openModal","bind","addVarkClicks","vark","header","open","precede","attribute","ModuleItem","active","setActive","useState","contents","contentitem","varkMode","internals","VarkProfile","lineWidth","fontFamily","color","title","value","Vcnt","Acnt","Rcnt","Kcnt","defaultProps","radius","transition","cursor","dataEntry","Math","round","percentage","fill","opacity","pointerEvents","Select","PureComponent","options","handleChange","event","passState","target","setState","item","MainPanel","varkselection","handleRemove","handleFilter","filterCallback","removeCourse","theState","getTeacherEmail","nameOfCourse","allCourses","JSON","parse","localStorage","getItem","teacher","i","len","CourseName","nteacher","showModules","showVarkProfile","welcomeMsg","unenroll","filter","moduleList","Object","values","modules","module","varkLetter","varkProfile","NameForm","handleSubmit","shouldAddCourse","needed","nclasscode","addCourse","alert","preventDefault","AddCoursePanel","courses","Container","newCourses","slice","push","usr","console","log","setItem","stringify","users","child","update","varkCharacter","newVark","varkClicks","wvarkclicks","newnewCourses","forEach","element","mainPanelMode","nameOfActiveCourse","getModules","arrayOfModules","j","len2","mainpanel","Home","email","componentDidMount","on","snapshot","coursesObject","val","coursesList","keys","key","appID","condition","authUser"],"mappings":"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","sourcesContent":["import React from 'react';\nimport logo from './moduluslogo.png';\nimport './App.css';\nimport { withAuthorization } from '../Session';\n\nimport { Modal,ModalManager,Effect} from 'react-dynamic-modal';\nimport { PieChart } from 'react-minimal-pie-chart';\nimport * as firebase from 'firebase'\nimport backarrow from './backarrow.png';\nrequire('@firebase/database');\n\nfunction Logo() {\n    return (\n        <div className=\"logo\" >\n            <br />\n            <img width=\"100%\" src={logo} alt=\"Modulus Logo\" />\n        </div>\n    )\n}\n\nfunction CourseListItem(props) {\n    return (\n        <div>\n            <div className=\"courselistitem\" onClick={() => {props.changeActiveCourse(props.name);}} >\n                {props.name}\n            </div>\n            <div style={{fontSize: \"5px\"}}>\n                <br />\n            </div>\n        </div>\n    );\n}\n\nfunction AddCourseItem(props) {\n    return (\n        <div className=\"addcourseitem\" onClick={props.addCourseMode}>\n            +\n        </div>\n    );\n}\n\nclass Sidebar extends React.Component { //the entire left sidebar\n    constructor(props) {\n        super(props);\n        this.state = {\n            username: props.username,\n            activeCourse: props.activeCourse,\n            arrCourses: props.arrCourses,\n        }\n    }\n\n    //utility functions to pass info up to container\n    changeActiveCourse = (name) => {this.props.changeActiveCourse(name);}\n    addCourseMode = () => {this.props.addCourseMode();}\n\n    render() {\n        return (\n            <div>\n                <div className=\"sidebar\">\n                <Logo /><br />\n                <div className=\"courselist\">\n                {(this.props.arrCourses.length<=1) ? (<div />) : this.props.arrCourses.map(course => ((course===\"Welcome\") ? (<div />) : (<CourseListItem name={course} active={(this.props.activeCourse===course ? \"active\" : \"\")} changeActiveCourse={this.changeActiveCourse}/>)))}\n                   <AddCourseItem addCourseMode={this.addCourseMode}/>\n                </div>\n            </div>\n            </div>\n            \n        );\n    }\n}\n\nclass MyModal extends React.Component{\n    render(){\n       const { text,onRequestClose } = this.props;\n\n       var internalDisplay = \"\"; //set this to the appropriate stuff based on this.props.internal and vark\n\n       var link = this.props.internal;\n\n       \n           if (link.includes(\"/edit?usp=sharing\")) { //standardize on \"view\" as the thing to replace, since GDrive is gaey and some view-only links still have edit in the link\n                link = link.substring(0, link.indexOf(\"/edit?usp=sharing\")) + \"/view?usp=sharing\";\n           }\n           if (link.includes(\"/view?usp=sharing\")) { //if its a google drive shared file\n                link = link.substring(0, link.indexOf(\"/view?usp=sharing\")) + \"/preview\"; //make it an embeddable preview\n\n                //embed it\n                var beforeCode = \"<iframe src=\\\"\";\n                var afterCode = \"\\\" width=\\\"100%\\\" height=\\\"750\\\" />\";\n                var code = beforeCode + link + afterCode;\n\n                internalDisplay = (<div dangerouslySetInnerHTML={{__html: code}}></div>);\n\n                return ( //big modal\n                    <Modal\n                        style= {{\n                            overlay: {\n                              position        : 'fixed',\n                              top             : -125,\n                              left            : 0,\n                              right           : 0,\n                              bottom          : 0,\n                              zIndex          : 99999999,\n                              overflow        : 'hidden',\n                              perspective     :  1300,\n                              backgroundColor : 'rgba(0, 0, 0, 0.3)'\n                            },\n                          \n                            content: {\n                              position                : 'relative',\n                              margin                  : '15% auto',\n                              width                   : '90%',\n                              height                  : '770px',\n                              border                  : '1px solid rgba(0, 0, 0, .2)',\n                              background              : '#fff',\n                              overflow                : 'auto',\n                              borderRadius            : '4px',\n                              outline                 : 'none',\n                              boxShadow               : '0 5px 10px rgba(0, 0, 0, .3)',\n                              textAlign               : 'center',\n                              overflow                : 'hidden',\n                            }\n                        }}\n                        onRequestClose={onRequestClose}\n                        effect={Effect.ScaleUp}\n                    >\n                        {internalDisplay}\n                    </Modal>\n                );\n           }\n           else { //just create a button and insert the link as the button's destination\n            var beforeCode = \"<a class=\\\"linkbutton\\\" target=\\\"_blank\\\" href=\\\"\";\n            var afterCode = \"\\\">Click here to open content in new tab</a>\";\n            var code = beforeCode + link + afterCode;\n            \n            internalDisplay = (<div dangerouslySetInnerHTML={{__html: code}}></div>);\n\n            return ( //small modal\n                <Modal\n                   className=\"modaldialog\"\n                   onRequestClose={onRequestClose}\n                   effect={Effect.ScaleUp}>\n                   <h1 className=\"modaldialog\">\n                       <table style={{maxHeight: \"50px\"}}>\n                           <tr>\n                               <td>\n                                  <button id=\"backbutton\" onClick={ModalManager.close}><img src={backarrow} alt=\"Return\" height=\"15px\"/></button> \n                               </td>\n                               <td>\n                                  {internalDisplay}\n                               </td>\n                           </tr>\n                       </table>             \n                   </h1>\n                </Modal>\n            );\n           }\n    }\n }\n\nclass ModuleContentItem extends React.Component {\n    constructor(props) {\n        super(props);\n        this.openModal = this.openModal.bind(this);\n    }\n\n    openModal() { //this registers the click\n        this.props.addVarkClicks(this.props.vark);\n\n        const header = this.props.name;\n        ModalManager.open(<MyModal text={header} internal={this.props.internal} vark={this.props.vark} onRequestClose={() => true}/>);\n    }\n\n    // const [openedStatus, open] = React.useState(\"\");\n    // React.useEffect(() => { \n    //    //open item view\n    // });\n\n    // let precede;\n    // if (openedStatus===\"active\") {\n    //     precede = openedStatus;\n    // } else {\n    //     precede = props.vark;\n    // }\n\n    //var attribute = precede+\"modulecontentitem\"\n    render() {\n        let precede = this.props.vark;\n        var attribute = precede+\"modulecontentitem\"\n        return (\n            <div className={attribute} onClick={() => this.openModal()}> \n            {/* put onClick attribute for itemView in the div right above here */}\n                {/* TODO: Remove currently contains part later and replace it with a link to open the item view with the proper internal */}\n                {this.props.name}\n            </div>\n        );\n    }\n}\n\nfunction ModuleItem(props) {\n    const [active, setActive] = React.useState(props.active);\n\n    var attribute = active+\"moduleitem\";\n    return (\n        <div className={attribute} >\n            <div class=\"moduletitle\" onClick={() => setActive(active===\"active\" ? \"\" : \"active\")}>\n                {props.name}\n            </div>\n            <div className=\"modulecontents\">\n                {props.contents.map(\n                    contentitem => \n                    (props.varkMode===\"All\" || props.varkMode===props.vark[props.contents.indexOf(contentitem)])\n                    ?\n                    (<ModuleContentItem \n                        name={contentitem} \n                        vark={props.vark[props.contents.indexOf(contentitem)]} \n                        internal={props.internals[props.contents.indexOf(contentitem)]}\n                        addVarkClicks={props.addVarkClicks}\n                    />)\n                    :\n                    (<div />)\n                )}\n            </div>\n        </div>\n    );\n}\n\nfunction VarkProfile(props) {\n    const lineWidth = 60;\n    return (\n        <div className=\"varkprofile\">\n            <table width=\"100%\">\n                <tr>\n                    <td>\n                        <PieChart\n                            style={{\n                                fontFamily:\n                                '\"Nunito Sans\", -apple-system, Helvetica, Arial, sans-serif',\n                                fontSize: '8px',\n                                height: \"150px\",\n                            }}\n                            data={[\n                                {\n                                    color: 'red',\n                                    title: 'V',\n                                    value: props.Vcnt,\n                                },\n                                {\n                                    color: 'blue',\n                                    title: 'A',\n                                    value: props.Acnt,\n                                },\n                                {\n                                    color: 'green',\n                                    title: 'R',\n                                    value: props.Rcnt,\n                                },\n                                {\n                                    color: 'purple',\n                                    title: 'K',\n                                    value: props.Kcnt,\n                                },\n                            ]}\n                            radius={PieChart.defaultProps.radius - 6}\n                            lineWidth={60}\n                            segmentsStyle={{ transition: 'stroke .3s', cursor: 'pointer' }}\n                            animate\n                            label={({ dataEntry }) => Math.round(dataEntry.percentage) + '%'}\n                            labelPosition={100 - lineWidth / 2}\n                            labelStyle={{\n                                fill: '#fff',\n                                opacity: 0.75,\n                                pointerEvents: 'none',\n                            }}\n                        />\n                    </td>\n                    <td>\n                        <div className=\"varkprofiletext\">\n                            <p><b>Course VARK Profile</b></p>\n                            <p style={{color: \"red\"}}>Visual</p>\n                            <p style={{color: \"blue\"}}>Auditory</p>\n                            <p style={{color: \"green\"}}>Reading/Writing</p>\n                            <p style={{color: \"purple\"}}>Kinesthetic</p>\n                        </div>\n                    </td>\n                </tr>\n            </table>\n        </div>\n    );\n}\n\nclass Select extends React.PureComponent {\n    constructor(props) {\n        super(props);\n    }\n\n    state = {\n      options: [\n        {\n            name: 'Show all VARK types',\n            value: \"All\",\n        },\n        {\n            name: 'Visual',\n            value: 'V',\n        },\n        {\n            name: 'Auditory',\n            value: 'A',\n        },\n        {\n            name: 'Reading/Writing',\n            value: 'R',\n        },\n        {\n            name: 'Kinesthetic',\n            value: 'K',\n        },\n      ],\n      value: '?',\n    };\n  \n    handleChange = (event) => {\n      this.props.passState(event.target.value);\n      this.setState({ value: event.target.value });\n    };\n  \n    render() {\n      const { options, value } = this.state;\n  \n      return (\n        <React.Fragment>\n            <select name=\"search_categories\" id=\"search_categories\" onChange={this.handleChange} value={value}>\n                {options.map(item => (\n                <option className=\"option\" key={item.value} value={item.value}>\n                    &nbsp;&nbsp;&nbsp;{item.name}\n                </option>\n                ))}\n            </select>\n        </React.Fragment>\n      );\n    }\n}\n\nclass MainPanel extends React.Component { //the entire right half of the screen where all the modules are\n    constructor (props){\n        super(props); \n        this.state = {\n            varkselection: \"All\",\n        };\n        this.handleRemove = this.handleRemove.bind(this);\n        this.handleFilter = this.handleFilter.bind(this);\n        this.filterCallback = this.filterCallback.bind(this);\n    }\n\n    handleRemove(event) {\n        this.props.removeCourse(this.props.activeCourse);\n    }\n\n    handleFilter(theState) {\n        this.setState({varkselection: theState}, () => this.filterCallback());\n    }\n\n    filterCallback() {\n        this.render();\n    }\n\n    getTeacherEmail(nameOfCourse) {\n        const allCourses = JSON.parse(localStorage.getItem('courses'));\n        var teacher;\n        for (let i = 0, len = allCourses.length; i < len; ++i) {\n            var course = allCourses[i];\n            if (course.CourseName === nameOfCourse) {\n                teacher = course.nteacher;\n            }\n        }\n        // should be returning correct email. If not, try Object.values(course.nteacher) instead\n        return teacher;\n    }\n\n    getCurrUserEmai\n\n    render() { //active: \"\" means the module is minimized, \"active\" means its expanded\n\n        var showModules = true;\n        var showVarkProfile = true;\n\n        var welcomeMsg;\n        var unenroll;\n        var filter;\n        if (this.props.activeCourse===\"none\") {\n            welcomeMsg = \"Select or add a course on the left to get started.\";\n            unenroll = (\n                <div />\n            );\n            showVarkProfile = false;\n            filter = (\n                <div />\n            );\n        }\n        else {\n            welcomeMsg = \"Welcome to \" + (this.props.activeCourse);\n            unenroll = (\n                <div className=\"removecoursebutton\" onClick={this.handleRemove}>\n                    Unenroll\n                </div>\n            );\n            filter = (<Select passState={this.handleFilter}/>);\n            if (welcomeMsg === \"Welcome to Welcome\") {\n                welcomeMsg = \"Select or add a course on the left to get started.\"\n                showModules = false;\n                unenroll = (\n                    <div />\n                );\n                showVarkProfile = false;\n                filter = (\n                    <div />\n                );\n            }\n        }\n\n        var moduleList = (<div />);\n        if (showModules) {\n            moduleList = (\n                <div className=\"modulelist\">\n                    {\n                        Object.values(this.props.modules).map(module =>\n                            <ModuleItem\n                                name={module.title}\n                                contents={module.contents}\n                                vark={module.vark}\n                                internals={module.internals}\n                                active=\"\"\n                                username={this.props.username}\n                                addVarkClicks={this.props.addVarkClicks}\n                                varkMode={this.state.varkselection}\n                            />\n                        )\n                    }\n                </div>\n            );\n        }\n\n        //counts the number of each vark item in modules\n        var Vcnt = 0;\n        var Acnt = 0;\n        var Rcnt = 0;\n        var Kcnt = 0;\n        var module;\n        var varkLetter;\n        for (module of this.props.modules) {\n            for (varkLetter of module.vark) {\n                if (varkLetter===\"V\") {\n                    Vcnt++;\n                }\n                if (varkLetter===\"A\") {\n                    Acnt++;\n                }\n                if (varkLetter===\"R\") {\n                    Rcnt++;\n                }\n                if (varkLetter===\"K\") {\n                    Kcnt++;\n                }\n            }\n        }\n\n        var varkProfile = (<div />);\n        if (showVarkProfile) {\n            varkProfile = (\n                <VarkProfile \n                    Vcnt={Vcnt}\n                    Acnt={Acnt}\n                    Rcnt={Rcnt}\n                    Kcnt={Kcnt}\n                />\n            );\n        }\n\n        return (\n            <div className=\"mainpanel\">\n                <table>\n                    <tr>\n                        <td>\n                            <div className=\"courseheader\">\n                                {welcomeMsg}\n                                <br /><br />\n                                <table>\n                                    <tr>\n                                        <td>\n                                            {unenroll}\n                                        </td>\n                                        <td>\n                                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n                                        </td>\n                                        <td>\n                                            {filter}\n                                        </td>\n                                    </tr>\n                                </table>\n                                <br />\n                            </div>\n                        </td>\n\n                        <td className=\"rightalignandfloatdown\">\n                            {varkProfile}\n                        </td>\n                    </tr>\n                </table>\n                <br />\n                {moduleList}     \n                <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br /> <br />\n            </div>\n        )\n    }\n}\n\nclass NameForm extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {value: ''};\n        this.handleChange = this.handleChange.bind(this);\n        this.handleSubmit = this.handleSubmit.bind(this);\n    }\n\n    handleChange(event) {    this.setState({value: event.target.value});  }\n\n    handleSubmit(event) { //plugs into the backend to add the course, and passes the function on up for the main container to do the re-rendering\n        let shouldAddCourse = false;\n\n        //check that the course is available on the database. If not, throw an error to the user\n        const allCourses = JSON.parse(localStorage.getItem('courses'));\n        var needed;\n        for (let i = 0, len = allCourses.length; i < len; ++i) {\n            var course = allCourses[i];\n            if (course.nclasscode === this.state.value) {\n                shouldAddCourse = true;\n                needed = course.CourseName;\n            }\n        }\n\n        if (shouldAddCourse) {\n            this.props.addCourse(needed);\n        } else {\n            alert('Sorry, class not found');\n        }\n        event.preventDefault();\n    }\n\n    render() {\n        return (\n            <form onSubmit={this.handleSubmit}>\n                <label>\n                    Enter the course code below<br /><br />\n                    <input type=\"text\" value={this.state.value} onChange={this.handleChange} /></label>\n                <br /><br />\n                <input type=\"submit\" value=\"Submit\" />\n            </form>\n        );\n    }\n}\n\nfunction AddCoursePanel(props) {\n    return (\n        <div className=\"mainpanel\">\n            <div className=\"addcourseview\">\n                <div className=\"addcoursetitle\">\n                    <b>Add a course</b>\n                </div>\n                <NameForm username={props.username} courses={props.courses} addCourse={props.addCourse}/>\n            </div>\n        </div>\n    );\n}\n\nclass Container extends React.Component { //the main container for everything on the screen, that also stores most global data in its state\n    constructor(props) {\n        super(props);\n\n        //bind the state setting functions to the current class\n        this.changeActiveCourse = this.changeActiveCourse.bind(this)\n        this.addCourseMode = this.addCourseMode.bind(this)\n\n        this.state = {\n            arrCourses: props.courses,\n            activeCourse: \"none\", //to be updated with the current open course\n            username: props.name,\n            mainPanelMode: 0, //0 means modules view (default), 1 means add-course view\n            varkClicks: props.varkClicks,\n        }\n\n    }\n\n    changeActiveCourse(nameOfActiveCourse) {\n        this.setState({\n            mainPanelMode: 0,\n            activeCourse: nameOfActiveCourse,\n        }, () => {this.render();});\n    }\n\n    addCourseMode() { //switches main panel view to addCourseMode\n        this.setState({\n            mainPanelMode: 1\n        });\n        this.render(); //force React to rerender\n    }\n\n    addCourse = (nameOfCourse) => { //actually adds the course\n        var newCourses = this.state.arrCourses.slice();\n        newCourses.push(nameOfCourse);\n        this.setState({\n            arrCourses: newCourses.slice(),\n        }, () => {this.changeActiveCourse(nameOfCourse);});\n        const usr = JSON.parse(localStorage.getItem('authUser'));\n        console.log(Object.values(usr).slice()[2]);\n        localStorage.setItem('authUser', JSON.stringify(usr));\n        console.log(Object.values(usr).slice()[2]);\n        this.props.firebase.users().child(Object.values(usr).slice()[0]).update({\n            courses: newCourses.slice(),\n        });\n    }\n\n    addVarkClicks = (varkCharacter) => {\n        var newVark = this.state.varkClicks.slice();\n        newVark.push(varkCharacter);\n        this.setState({\n            varkClicks: newVark.slice(),\n        });\n        const usr = JSON.parse(localStorage.getItem('authUser'));\n        console.log(Object.values(usr).slice()[6]);\n        localStorage.setItem('authUser', JSON.stringify(usr));\n        console.log(Object.values(usr).slice()[6]);\n        this.props.firebase.users().child(Object.values(usr).slice()[0]).update({\n            wvarkclicks: newVark.slice(),\n        });\n    }\n\n    removeCourse = (nameOfCourse) => {\n        var newCourses = this.state.arrCourses.slice();\n        var newnewCourses = [];\n        newCourses.forEach(element => {\n            if (!(element===nameOfCourse)) {\n                newnewCourses.push(element);\n            }\n        });\n        newCourses = newnewCourses.slice();\n        this.setState({\n            arrCourses: newCourses.slice(),\n        }, () => {this.changeActiveCourse(this.state.arrCourses.slice()[0]);});\n        const usr = JSON.parse(localStorage.getItem('authUser'));\n        console.log(Object.values(usr).slice()[2]);\n        localStorage.setItem('authUser', JSON.stringify(usr));\n        console.log(Object.values(usr).slice()[2]);\n        this.props.firebase.users().child(Object.values(usr).slice()[0]).update({\n            courses: newCourses.slice(),\n        });\n    }\n\n    getModules(name) {\n        const allCourses = JSON.parse(localStorage.getItem('courses')); // here is a parsed json of the course list\n        if ( name === \"none\")\n            return []\n\n        for (let i = 0, len = allCourses.length; i < len; ++i) {\n            var course = allCourses[i];\n\n\n            if ( course.CourseName === name) { //now we've retrieved the correct course to display\n                //here we need to return all of the modules in that course in an array\n\n                var arrayOfModules = (Object.values(course.modules));\n                for (let j = 0, len2 = arrayOfModules.length; j<len2; ++j) {\n                    arrayOfModules[j].contents = (Object.values(arrayOfModules[j].contents));\n                    arrayOfModules[j].vark = (Object.values(arrayOfModules[j].vark));\n                    arrayOfModules[j].internals = (Object.values(arrayOfModules[j].internals));\n                }\n                return arrayOfModules;\n\n                // we need to convert the objects so that every internal thing is an array, as well as the whole thing, like this [ \n                //     {\n                //         title: course.CourseName,\n                //         contents: [\"Item 1\", \"Item 2\", \"Item 3\"],\n                //         vark: ['V', \"A\", \"R\"],\n                //         internals: [\"https://www.youtube.com/watch?v=2qv_vCHZkcg&t=1689s\", \"oogwayascends.mp3\", \"In the beginning, there was darkness.\"]\n                //     },\n                //     {\n                //         title: course.CourseName,\n                //         contents: [\"Item 1\", \"Item 2\", \"Item 3\"],\n                //         vark: ['V', \"A\", \"R\"],\n                //         internals: [\"https://www.youtube.com/watch?v=2qv_vCHZkcg&t=1689s\", \"oogwayascends.mp3\", \"In the beginning, there was darkness.\"]\n                //     },\n                // ];\n            }\n            else{\n                console.log(\"whoops\");\n            }\n        }\n    }\n\n    render() {\n        var mainpanel;\n        if (this.state.mainPanelMode===0) {\n            mainpanel = <MainPanel username={this.state.username} activeCourse={this.state.activeCourse} modules={this.getModules(this.state.activeCourse)} removeCourse={this.removeCourse} addVarkClicks={this.addVarkClicks}/>\n        } else if (this.state.mainPanelMode===1) {\n            mainpanel = <AddCoursePanel username={this.state.username} currentCourses={this.state.arrCourses} addCourse={this.addCourse}/>\n        }\n        return (\n            <div className=\"App\">\n                <div className=\"container\">\n                    <div className=\"left-element\">\n                        <Sidebar\n                            username={this.state.username}\n                            activeCourse={this.state.activeCourse}\n                            arrCourses={this.state.arrCourses}\n                            changeActiveCourse={this.changeActiveCourse}\n                            addCourseMode={this.addCourseMode}\n                        />\n                    </div>\n                    <div className=\"right-element\">\n                        {mainpanel}\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nclass Home extends React.Component {\n    constructor(props) {\n        super(props);\n        const usr = JSON.parse(localStorage.getItem('authUser'));\n        this.state = {\n            username: Object.values(usr).slice()[4],\n            email: Object.values(usr).slice()[1],\n            courses: Object.values(usr).slice()[2],\n            varkClicks: Object.values(usr).slice()[6],\n        }\n    }\n    componentDidMount() {\n        const usr = JSON.parse(localStorage.getItem('authUser'));\n        this.props.firebase.courses().on('value', snapshot => {\n            const coursesObject = snapshot.val();\n            const coursesList = Object.keys(coursesObject).map(key => ({\n                ...coursesObject[key],\n                appID: key,\n            }));\n            localStorage.setItem('courses', JSON.stringify(coursesList));\n            this.setState({\n                username: Object.values(usr).slice()[4],\n                email: Object.values(usr).slice()[1],\n                courses: Object.values(usr).slice()[2],\n\n            });\n        });\n\n    }\n\n    render() {\n        return ( //when login is implemented, it should create an app with the appropriate username passed in\n            <Container name={this.state.username} courses={this.state.courses} firebase={this.props.firebase} varkClicks={this.state.varkClicks} />\n        );\n    }\n}\n\n\nconst condition = authUser => !!authUser;\n\nexport default withAuthorization(condition)(Home);\n"]},"metadata":{},"sourceType":"module"}